{"mappings":"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","sources":["<anon>","src/scripts/Contacts.ts"],"sourcesContent":["\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire2d0a\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire2d0a\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $6KOho = parcelRequire(\"6KOho\");\n\nvar $3rinH = parcelRequire(\"3rinH\");\n\nvar $ildEr = parcelRequire(\"ildEr\");\n\nvar $dzOrt = parcelRequire(\"dzOrt\");\n(0, (/*@__PURE__*/$parcel$interopDefault($6KOho)))(()=>{\n    const user = (0, $3rinH.getUserFromCookie)();\n    if (!user.id) {\n        // comment these two lines while testing\n        window.location.href = \"/\";\n        return;\n    }\n    const searchInput = (0, (/*@__PURE__*/$parcel$interopDefault($6KOho)))(\"#searchInput\");\n    const contactsTable = (0, (/*@__PURE__*/$parcel$interopDefault($6KOho)))(\"#contactsTable\");\n    const pagesHolder = (0, (/*@__PURE__*/$parcel$interopDefault($6KOho)))(\"#pagesHolder\");\n    const addOverlay = (0, (/*@__PURE__*/$parcel$interopDefault($6KOho)))(\"#addOverlay\");\n    const addInputs = addOverlay.find(\"input:is([type='text']\");\n    const addFirstNameInput = (0, (/*@__PURE__*/$parcel$interopDefault($6KOho)))(\"#addFirstNameInput\");\n    const addLastNameInput = (0, (/*@__PURE__*/$parcel$interopDefault($6KOho)))(\"#addLastNameInput\");\n    const addPhoneInput = (0, (/*@__PURE__*/$parcel$interopDefault($6KOho)))(\"#addPhoneInput\");\n    const addEmailInput = (0, (/*@__PURE__*/$parcel$interopDefault($6KOho)))(\"#addEmailInput\");\n    const addErrorHolder = (0, (/*@__PURE__*/$parcel$interopDefault($6KOho)))(\"#addErrorHolder\");\n    const addConfirmButton = (0, (/*@__PURE__*/$parcel$interopDefault($6KOho)))(\"#addConfirmButton\");\n    // const addCancelButton = $<HTMLButtonElement>(\"#addCancelButton\");\n    // start disabled\n    addConfirmButton.prop(\"disabled\", true);\n    (0, (/*@__PURE__*/$parcel$interopDefault($6KOho)))(\"#logoutButton\").on(\"click\", ()=>{\n        (0, $3rinH.clearCookie)();\n        window.location.href = \"/\";\n    });\n    let contacts = [];\n    function loadPage(page = 1) {\n        contactsTable.children(\":not(:first-child)\").remove();\n        const offset = (page - 1) * 10;\n        for(let i = offset; i < offset + 10 && i < contacts.length; i++){\n            const contact = contacts[i];\n            let row = document.createElement(\"div\");\n            row.classList.add(\"row\");\n            (0, (/*@__PURE__*/$parcel$interopDefault($6KOho)))(row).data(\"id\", contact.id);\n            let name = document.createElement(\"p\");\n            name.innerText = `${contact.firstName} ${contact.lastName}`;\n            let email = document.createElement(\"p\");\n            email.innerText = contact.email;\n            let phone = document.createElement(\"p\");\n            phone.innerText = contact.phone;\n            let actions = document.createElement(\"div\");\n            let editButton = document.createElement(\"button\");\n            editButton.innerText = \"Edit\";\n            let deleteButton = document.createElement(\"button\");\n            deleteButton.innerText = \"Delete\";\n            actions.append(editButton, deleteButton);\n            row.append(name, email, phone, actions);\n            contactsTable.append(row);\n        }\n    }\n    (0, (/*@__PURE__*/$parcel$interopDefault($6KOho)))(\"#searchButton\").on(\"click\", ()=>{\n        (0, $ildEr.request)(\"SearchName\", {\n            user_id: user.id,\n            search: searchInput.val() ?? \"\"\n        }, (response)=>{\n            contacts = response.results;\n            pagesHolder.empty();\n            let pageCount = Math.max(Math.ceil(contacts.length / 10), 1);\n            for(let i = 1; i <= pageCount; i++){\n                let button = document.createElement(\"button\");\n                button.innerText = i.toString();\n                (0, (/*@__PURE__*/$parcel$interopDefault($6KOho)))(button).on(\"click\", ()=>{\n                    console.log(\"page\", i);\n                    loadPage(i);\n                });\n                pagesHolder.append(button);\n            }\n            loadPage();\n        }, (error)=>{});\n    });\n    (0, (/*@__PURE__*/$parcel$interopDefault($6KOho)))(\"#addButton\").on(\"click\", ()=>{\n        addOverlay.removeClass(\"inactive\");\n    });\n    (0, (/*@__PURE__*/$parcel$interopDefault($6KOho)))(\"#addCancelButton\").on(\"click\", ()=>{\n        addOverlay.addClass(\"inactive\");\n    });\n    // returns whether there are errors\n    const validateAddContact = ()=>{\n        const errors = (0, $dzOrt.validatePartialName)(addFirstNameInput.val() ?? \"\", \"First\").concat((0, $dzOrt.validatePartialName)(addLastNameInput.val() ?? \"\", \"Last\"), (0, $dzOrt.validatePhone)(addPhoneInput.val() ?? \"\"), (0, $dzOrt.validateEmail)(addEmailInput.val() ?? \"\"));\n        console.log(errors);\n        addErrorHolder.html(errors.join(\"<br />\"));\n        addConfirmButton.prop(\"disabled\", !!errors.length);\n        return !!errors.length;\n    };\n    const addContact = ()=>{\n        // console.log(loginUsernameInput.val(), loginPasswordInput.val());\n        (0, $ildEr.request)(\"AddContact\", {\n            user_id: user.id,\n            name_first: addFirstNameInput.val() ?? \"\",\n            name_last: addLastNameInput.val() ?? \"\",\n            phone: addPhoneInput.val() ?? \"\",\n            email: addEmailInput.val() ?? \"\"\n        }, (response)=>{\n            console.log(response);\n        }, (errorMessage)=>{\n            console.log(errorMessage);\n        });\n        addInputs.val(\"\");\n        addOverlay.addClass(\"inactive\");\n    };\n    addInputs.on(\"focus\", (event)=>{\n        validateAddContact();\n    });\n    addInputs.on(\"keyup\", (event)=>{\n        if (validateAddContact()) return;\n        if (event.key === \"Enter\") addContact();\n    });\n    addInputs.on(\"blur\", (event)=>{\n        addErrorHolder.text(\"\");\n    });\n    addConfirmButton.on(\"click\", addContact);\n});\n\n\n//# sourceMappingURL=contacts.beb08dde.js.map\n","import $ from \"jquery\";\r\nimport { clearCookie, getUserFromCookie } from \"./Cookies\";\r\n// import { user } from \"./Account\";\r\nimport { request } from \"./API\";\r\nimport { Contact } from \"./types/Entity\";\r\nimport { validateEmail, validatePartialName, validatePhone } from \"./Validation\";\r\n\r\n\r\n$(() => {\r\n    const user = getUserFromCookie();\r\n    if (!user.id) {\r\n        // comment these two lines while testing\r\n        window.location.href = \"/\";\r\n        return;\r\n    }\r\n\r\n    const searchInput = $<HTMLInputElement>(\"#searchInput\");\r\n\r\n    const contactsTable = $<HTMLDivElement>(\"#contactsTable\");\r\n\r\n    const pagesHolder = $<HTMLDivElement>(\"#pagesHolder\");\r\n    const addOverlay = $<HTMLDivElement>(\"#addOverlay\");\r\n    const addInputs = addOverlay.find(\"input:is([type='text']\");\r\n\r\n    const addFirstNameInput = $<HTMLInputElement>(\"#addFirstNameInput\");\r\n    const addLastNameInput = $<HTMLInputElement>(\"#addLastNameInput\");\r\n    const addPhoneInput = $<HTMLInputElement>(\"#addPhoneInput\");\r\n    const addEmailInput = $<HTMLInputElement>(\"#addEmailInput\");\r\n    const addErrorHolder = $<HTMLParagraphElement>(\"#addErrorHolder\");\r\n    const addConfirmButton = $<HTMLButtonElement>(\"#addConfirmButton\");\r\n    // const addCancelButton = $<HTMLButtonElement>(\"#addCancelButton\");\r\n\r\n    // start disabled\r\n    addConfirmButton.prop(\"disabled\", true);\r\n\r\n    $(\"#logoutButton\").on(\"click\", () => {\r\n        clearCookie();\r\n        window.location.href = \"/\";\r\n    });\r\n\r\n    let contacts: Contact[] = [];\r\n    function loadPage(page = 1) {\r\n        contactsTable.children(\":not(:first-child)\").remove();\r\n\r\n        const offset = (page - 1) * 10;\r\n        for (let i = offset; i < offset + 10 && i < contacts.length; i++) {\r\n            const contact = contacts[i];\r\n\r\n            let row = document.createElement(\"div\");\r\n            row.classList.add(\"row\");\r\n            $(row).data(\"id\", contact.id);\r\n\r\n            let name = document.createElement(\"p\");\r\n            name.innerText = `${contact.firstName} ${contact.lastName}`;\r\n\r\n            let email = document.createElement(\"p\");\r\n            email.innerText = contact.email;\r\n\r\n            let phone = document.createElement(\"p\");\r\n            phone.innerText = contact.phone;\r\n\r\n            let actions = document.createElement(\"div\");\r\n            let editButton = document.createElement(\"button\");\r\n            editButton.innerText = \"Edit\";\r\n            let deleteButton = document.createElement(\"button\");\r\n            deleteButton.innerText = \"Delete\";\r\n            actions.append(editButton, deleteButton);\r\n\r\n            row.append(name, email, phone, actions);\r\n\r\n            contactsTable.append(row);\r\n        }\r\n    }\r\n\r\n    $(\"#searchButton\").on(\"click\", () => {\r\n        request(\"SearchName\",\r\n            { user_id: user.id, search: searchInput.val() ?? \"\" },\r\n            (response) => {\r\n                contacts = response.results;\r\n\r\n                pagesHolder.empty();\r\n                let pageCount = Math.max(Math.ceil(contacts.length / 10), 1);\r\n                for (let i = 1; i <= pageCount; i++) {\r\n                    let button = document.createElement(\"button\");\r\n                    button.innerText = i.toString();\r\n                    $(button).on(\"click\", () => {\r\n                        console.log(\"page\", i);\r\n                        loadPage(i);\r\n                    });\r\n                    pagesHolder.append(button);\r\n                }\r\n\r\n                loadPage();\r\n            },\r\n            (error) => {\r\n            }\r\n        );\r\n    });\r\n\r\n    $(\"#addButton\").on(\"click\", () => {\r\n        addOverlay.removeClass(\"inactive\");\r\n    });\r\n\r\n    $(\"#addCancelButton\").on(\"click\", () => {\r\n        addOverlay.addClass(\"inactive\");\r\n    });\r\n\r\n    // returns whether there are errors\r\n    const validateAddContact = () => {\r\n        const errors = validatePartialName(addFirstNameInput.val() ?? \"\", \"First\").concat(\r\n            validatePartialName(addLastNameInput.val() ?? \"\", \"Last\"),\r\n            validatePhone(addPhoneInput.val() ?? \"\"),\r\n            validateEmail(addEmailInput.val() ?? \"\"),\r\n        );\r\n        console.log(errors);\r\n\r\n        addErrorHolder.html(errors.join(\"<br />\"));\r\n        addConfirmButton.prop(\"disabled\", !!errors.length);\r\n\r\n        return !!errors.length;\r\n    };\r\n\r\n    const addContact = () => {\r\n        // console.log(loginUsernameInput.val(), loginPasswordInput.val());\r\n        request(\"AddContact\",\r\n            {\r\n                user_id: user.id,\r\n                name_first: addFirstNameInput.val() ?? \"\",\r\n                name_last: addLastNameInput.val() ?? \"\",\r\n                phone: addPhoneInput.val() ?? \"\",\r\n                email: addEmailInput.val() ?? \"\",\r\n            },\r\n            (response) => {\r\n                console.log(response);\r\n            },\r\n            (errorMessage) => {\r\n                console.log(errorMessage);\r\n            });\r\n\r\n        addInputs.val(\"\");\r\n        addOverlay.addClass(\"inactive\");\r\n    };\r\n\r\n    addInputs.on(\"focus\", (event) => {\r\n        validateAddContact();\r\n    });\r\n    addInputs.on(\"keyup\", (event) => {\r\n        if (validateAddContact()) {\r\n            return;\r\n        }\r\n\r\n        if (event.key === \"Enter\") {\r\n            addContact();\r\n        }\r\n    });\r\n    addInputs.on(\"blur\", (event) => {\r\n        addErrorHolder.text(\"\");\r\n    });\r\n\r\n    addConfirmButton.on(\"click\", addContact);\r\n});\r\n"],"names":["$parcel$interopDefault","a","__esModule","default","$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$6KOho","$3rinH","$ildEr","$dzOrt","user","getUserFromCookie","window","location","href","searchInput","contactsTable","pagesHolder","addOverlay","addInputs","find","addFirstNameInput","addLastNameInput","addPhoneInput","addEmailInput","addErrorHolder","addConfirmButton","prop","on","clearCookie","contacts","loadPage","page","children","remove","offset","i","length","contact","row","document","createElement","classList","add","data","name","innerText","firstName","lastName","email","phone","actions","editButton","deleteButton","append","request","user_id","search","val","response","results","empty","pageCount","Math","max","ceil","button","toString","console","log","error","removeClass","addClass","validateAddContact","errors","validatePartialName","concat","validatePhone","validateEmail","html","join","addContact","name_first","name_last","errorMessage","event","key","text"],"version":3,"file":"contacts.beb08dde.js.map"}