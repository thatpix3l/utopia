function e(e){return e&&e.__esModule?e.default:e}var t=globalThis,l={},a={},n=t.parcelRequire2d0a;null==n&&((n=function(e){if(e in l)return l[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return l[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequire2d0a=n),n.register;var i=n("6KOho"),o=n("3rinH"),r=n("ildEr"),d=n("dzOrt");e(i)(()=>{let t=(0,o.getUserFromCookie)();if(!t.id){window.location.href="/";return}let l=e(i)("#searchButton"),a=e(i)("#searchInput"),n=e(i)("#contactsTable"),c=e(i)("#pagesHolder"),s=e(i)("#addOverlay"),u=s.find("input:is([type='text']"),m=e(i)("#addFirstNameInput"),p=e(i)("#addLastNameInput"),v=e(i)("#addPhoneInput"),h=e(i)("#addEmailInput"),g=e(i)("#addErrorHolder"),f=e(i)("#addConfirmButton"),k=e(i)("#editOverlay"),E=k.find("input:is([type='text']"),w=e(i)("#editFirstNameInput"),C=e(i)("#editLastNameInput"),x=e(i)("#editPhoneInput"),b=e(i)("#editEmailInput"),N=e(i)("#editErrorHolder"),y=e(i)("#editConfirmButton");f.prop("disabled",!0),y.prop("disabled",!0),e(i)("#logoutButton").on("click",()=>{(0,o.clearCookie)(),window.location.href="/"});let _=[],M=0,T=0;function B(a=1){M=a;let o=c.children("button");o.removeClass("selected"),o.eq(a-1).addClass("selected"),n.children(":not(:first-child)").remove();let d=(a-1)*10;for(let a=d;a<d+10&&a<_.length;a++){let o=_[a],d=document.createElement("div");d.classList.add("row");let c=document.createElement("p");c.innerText=`${o.firstName} ${o.lastName}`;let s=document.createElement("p");s.innerText=o.email;let u=document.createElement("p");u.innerText=o.phone;let m=document.createElement("div"),p=document.createElement("button");p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83l3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"/></svg>',e(i)(p).on("click",()=>{k.removeClass("inactive"),T=o.id,w.val(o.firstName),C.val(o.lastName),x.val(o.phone),b.val(o.email)});let v=document.createElement("button");v.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6z"/></svg>',e(i)(v).on("click",()=>{confirm(`Warning, this will delete the contact with the name '${o.firstName} ${o.lastName}'.`)&&(0,r.request)("DeleteContact",{id:o.id,user_id:t.id},e=>{console.log(e),l.trigger("click")},e=>{console.log(e)})}),m.append(p,v),d.append(c,s,u,m),n.append(d)}}l.on("click",()=>{(0,r.request)("SearchName",{user_id:t.id,search:a.val()??""},t=>{_=t.results,c.empty();let l=Math.max(Math.ceil(_.length/10),1);for(let t=1;t<=l;t++){let l=document.createElement("button");l.innerText=t.toString(),e(i)(l).on("click",()=>{console.log("page",t),B(t)}),c.append(l)}B(Math.min(M,l)||1)},t=>{_=[],c.empty();let l=document.createElement("button");l.innerText="1",e(i)(l).on("click",()=>{console.log("page",1),B(1)}),c.append(l),B(1)})}),a.on("keyup",e=>{"Enter"===e.key&&l.trigger("click")}),e(i)("#addButton").on("click",()=>{s.removeClass("inactive")}),e(i)("#addCancelButton").on("click",()=>{s.addClass("inactive")});let I=()=>{let e=(0,d.validatePartialName)(m.val()??"","First").concat((0,d.validatePartialName)(p.val()??"","Last"),(0,d.validatePhone)(v.val()??""),(0,d.validateEmail)(h.val()??""));return g.html(e.join("<br />")),f.prop("disabled",!!e.length),!!e.length},L=()=>{(0,r.request)("AddContact",{user_id:t.id,name_first:m.val()??"",name_last:p.val()??"",phone:v.val()??"",email:h.val()??""},e=>{console.log(e),l.trigger("click")},e=>{console.log(e)}),u.val(""),f.prop("disabled",!0),s.addClass("inactive")};u.on("focus",e=>{I()}),u.on("keyup",e=>{I()||"Enter"!==e.key||L()}),u.on("blur",e=>{g.text("")}),f.on("click",L),e(i)("#editCancelButton").on("click",()=>{k.addClass("inactive")});let H=()=>{let e=(0,d.validatePartialName)(w.val()??"","First").concat((0,d.validatePartialName)(C.val()??"","Last"),(0,d.validatePhone)(x.val()??""),(0,d.validateEmail)(b.val()??""));return N.html(e.join("<br />")),y.prop("disabled",!!e.length),!!e.length},P=()=>{(0,r.request)("EditContact",{id:T,user_id:t.id,name_first:w.val()??"",name_last:C.val()??"",phone:x.val()??"",email:b.val()??""},e=>{console.log(e),l.trigger("click")},e=>{console.log(e)}),T=0,E.val(""),y.prop("disabled",!0),k.addClass("inactive")};E.on("focus",e=>{H()}),E.on("keyup",e=>{H()||"Enter"!==e.key||P()}),E.on("blur",e=>{N.text("")}),y.on("click",P)});
//# sourceMappingURL=contacts.a9456fd8.js.map
