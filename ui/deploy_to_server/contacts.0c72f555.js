function e(e){return e&&e.__esModule?e.default:e}var t=globalThis,l={},a={},n=t.parcelRequire2d0a;null==n&&((n=function(e){if(e in l)return l[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return l[e]=n,t.call(n.exports,n,n.exports),n.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequire2d0a=n),n.register;var o=n("6KOho"),i=n("3rinH"),r=n("ildEr"),d=n("dzOrt");e(o)(()=>{let t=(0,i.getUserFromCookie)();if(!t.id){window.location.href="/";return}let l=e(o)("#searchButton"),a=e(o)("#searchInput"),n=e(o)("#contactsTable"),c=e(o)("#pagesHolder"),s=e(o)("#addOverlay"),u=s.find("input:is([type='text']"),m=e(o)("#addFirstNameInput"),p=e(o)("#addLastNameInput"),v=e(o)("#addPhoneInput"),h=e(o)("#addEmailInput"),g=e(o)("#addErrorHolder"),f=e(o)("#addConfirmButton"),k=e(o)("#editOverlay"),w=k.find("input:is([type='text']"),E=e(o)("#editFirstNameInput"),C=e(o)("#editLastNameInput"),x=e(o)("#editPhoneInput"),b=e(o)("#editEmailInput"),N=e(o)("#editErrorHolder"),y=e(o)("#editConfirmButton");f.prop("disabled",!0),y.prop("disabled",!0),e(o)("#logoutButton").on("click",()=>{(0,i.clearCookie)(),window.location.href="/"});let _=[],I=0,M=0;function P(a=1){I=a;let i=c.children("button");i.removeClass("selected"),i.eq(a-1).addClass("selected"),n.children(":not(:first-child)").remove();let d=(a-1)*10;for(let a=d;a<d+10&&a<_.length;a++){let i=_[a],d=document.createElement("div");d.classList.add("row");let c=document.createElement("p");c.innerText=`${i.firstName} ${i.lastName}`;let s=document.createElement("p");s.innerText=i.email;let u=document.createElement("p");u.innerText=i.phone;let m=document.createElement("div"),p=document.createElement("button");p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83l3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"/></svg>',e(o)(p).on("click",()=>{k.removeClass("inactive"),M=i.id,E.val(i.firstName),C.val(i.lastName),x.val(i.phone),b.val(i.email)});let v=document.createElement("button");v.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6z"/></svg>',e(o)(v).on("click",()=>{confirm(`Warning, this will delete the contact with the name '${i.firstName} ${i.lastName}'.`)&&(0,r.request)("DeleteContact",{id:i.id,user_id:t.id},e=>{console.log(e),l.trigger("click")},e=>{console.log(e)})}),m.append(p,v),d.append(c,s,u,m),n.append(d)}}l.on("click",()=>{(0,r.request)("SearchName",{user_id:t.id,search:a.val()??""},t=>{_=t.results,c.empty();let l=Math.max(Math.ceil(_.length/10),1);for(let t=1;t<=l;t++){let l=document.createElement("button");l.innerText=t.toString(),e(o)(l).on("click",()=>{console.log("page",t),P(t)}),c.append(l)}P(Math.min(I,l)||1)},t=>{_=[],c.empty();let l=document.createElement("button");l.innerText="1",e(o)(l).on("click",()=>{console.log("page",1),P(1)}),c.append(l),P(1)})}),a.on("keyup",e=>{"Enter"===e.key&&l.trigger("click")}),e(o)("#addButton").on("click",()=>{s.removeClass("inactive")}),e(o)("#addCancelButton").on("click",()=>{s.addClass("inactive")});let T=()=>{let e=(0,d.validatePartialName)(m.val()??"","First").concat((0,d.validatePartialName)(p.val()??"","Last"),(0,d.validatePhone)(v.val()??""),(0,d.validateEmail)(h.val()??""));return g.html(e.join("<br />")),f.prop("disabled",!!e.length),!!e.length},B=()=>{(0,r.request)("AddContact",{user_id:t.id,name_first:m.val()??"",name_last:p.val()??"",phone:v.val()??"",email:h.val()??""},e=>{console.log(e),l.trigger("click")},e=>{console.log(e)}),u.val(""),f.prop("disabled",!0),s.addClass("inactive")};u.on("focus",e=>{T()}),u.on("keyup",e=>{T()||"Enter"!==e.key||B()}),u.on("blur",e=>{g.text("")}),v.on("keydown",d.autoFormatPhoneInput),f.on("click",B),e(o)("#editCancelButton").on("click",()=>{k.addClass("inactive")});let L=()=>{let e=(0,d.validatePartialName)(E.val()??"","First").concat((0,d.validatePartialName)(C.val()??"","Last"),(0,d.validatePhone)(x.val()??""),(0,d.validateEmail)(b.val()??""));return N.html(e.join("<br />")),y.prop("disabled",!!e.length),!!e.length},F=()=>{(0,r.request)("EditContact",{id:M,user_id:t.id,name_first:E.val()??"",name_last:C.val()??"",phone:x.val()??"",email:b.val()??""},e=>{console.log(e),l.trigger("click")},e=>{console.log(e)}),M=0,w.val(""),y.prop("disabled",!0),k.addClass("inactive")};w.on("focus",e=>{L()}),w.on("keyup",e=>{L()||"Enter"!==e.key||F()}),w.on("blur",e=>{N.text("")}),x.on("keydown",d.autoFormatPhoneInput),y.on("click",F)});
//# sourceMappingURL=contacts.0c72f555.js.map
