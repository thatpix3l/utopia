function e(e){return e&&e.__esModule?e.default:e}var t=globalThis,l={},a={},n=t.parcelRequire2d0a;null==n&&((n=function(e){if(e in l)return l[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return l[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequire2d0a=n),n.register;var i=n("6KOho"),o=n("3rinH"),r=n("ildEr"),d=n("dzOrt");e(i)(()=>{let t=(0,o.getUserFromCookie)();if(!t.id){window.location.href="/";return}let l=e(i)("#searchButton"),a=e(i)("#searchInput"),n=e(i)("#contactsTable"),c=e(i)("#pagesHolder"),s=e(i)("#addOverlay"),u=s.find("input:is([type='text']"),m=e(i)("#addFirstNameInput"),v=e(i)("#addLastNameInput"),p=e(i)("#addPhoneInput"),h=e(i)("#addEmailInput"),g=e(i)("#addErrorHolder"),f=e(i)("#addConfirmButton"),k=e(i)("#editOverlay"),E=k.find("input:is([type='text']"),w=e(i)("#editFirstNameInput"),x=e(i)("#editLastNameInput"),C=e(i)("#editPhoneInput"),N=e(i)("#editEmailInput"),b=e(i)("#editErrorHolder"),_=e(i)("#editConfirmButton");f.prop("disabled",!0),_.prop("disabled",!0),e(i)("#logoutButton").on("click",()=>{(0,o.clearCookie)(),window.location.href="/"});let y=[],M=0,B=0;function I(a=1){M=a,n.children(":not(:first-child)").remove();let o=(a-1)*10;for(let a=o;a<o+10&&a<y.length;a++){let o=y[a],d=document.createElement("div");d.classList.add("row");let c=document.createElement("p");c.innerText=`${o.firstName} ${o.lastName}`;let s=document.createElement("p");s.innerText=o.email;let u=document.createElement("p");u.innerText=o.phone;let m=document.createElement("div"),v=document.createElement("button");v.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83l3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"/></svg>',e(i)(v).on("click",()=>{k.removeClass("inactive"),B=o.id,w.val(o.firstName),x.val(o.lastName),C.val(o.phone),N.val(o.email)});let p=document.createElement("button");p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6z"/></svg>',e(i)(p).on("click",()=>{confirm(`Warning, this will delete the contact with the name '${o.firstName} ${o.lastName}'.`)&&(0,r.request)("DeleteContact",{id:o.id,user_id:t.id},e=>{console.log(e),l.trigger("click")},e=>{console.log(e)})}),m.append(v,p),d.append(c,s,u,m),n.append(d)}}l.on("click",()=>{(0,r.request)("SearchName",{user_id:t.id,search:a.val()??""},t=>{y=t.results,c.empty();let l=Math.max(Math.ceil(y.length/10),1);for(let t=1;t<=l;t++){let l=document.createElement("button");l.innerText=t.toString(),e(i)(l).on("click",()=>{console.log("page",t),I(t)}),c.append(l)}I(Math.min(M,l)??1)},e=>{})}),a.on("keyup",e=>{"Enter"===e.key&&l.trigger("click")}),e(i)("#addButton").on("click",()=>{s.removeClass("inactive")}),e(i)("#addCancelButton").on("click",()=>{s.addClass("inactive")});let L=()=>{let e=(0,d.validatePartialName)(m.val()??"","First").concat((0,d.validatePartialName)(v.val()??"","Last"),(0,d.validatePhone)(p.val()??""),(0,d.validateEmail)(h.val()??""));return console.log(e),g.html(e.join("<br />")),f.prop("disabled",!!e.length),!!e.length},T=()=>{(0,r.request)("AddContact",{user_id:t.id,name_first:m.val()??"",name_last:v.val()??"",phone:p.val()??"",email:h.val()??""},e=>{console.log(e),l.trigger("click")},e=>{console.log(e)}),u.val(""),s.addClass("inactive")};u.on("focus",e=>{L()}),u.on("keyup",e=>{L()||"Enter"!==e.key||T()}),u.on("blur",e=>{g.text("")}),f.on("click",T),e(i)("#editCancelButton").on("click",()=>{k.addClass("inactive")});let H=()=>{let e=(0,d.validatePartialName)(w.val()??"","First").concat((0,d.validatePartialName)(x.val()??"","Last"),(0,d.validatePhone)(C.val()??""),(0,d.validateEmail)(N.val()??""));return console.log(e),b.html(e.join("<br />")),_.prop("disabled",!!e.length),!!e.length},P=()=>{(0,r.request)("EditContact",{id:B,user_id:t.id,name_first:w.val()??"",name_last:x.val()??"",phone:C.val()??"",email:N.val()??""},e=>{console.log(e),l.trigger("click")},e=>{console.log(e)}),B=0,E.val(""),k.addClass("inactive")};E.on("focus",e=>{H()}),E.on("keyup",e=>{H()||"Enter"!==e.key||P()}),E.on("blur",e=>{b.text("")}),_.on("click",P)});
//# sourceMappingURL=contacts.f3b0d5aa.js.map
